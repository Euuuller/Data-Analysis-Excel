<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dashboard interativo de an√°lise de cohort - Visualize reten√ß√£o e engajamento de usu√°rios">
    <title>Cohort Analysis Dashboard</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="32" height="32" rx="8" fill="url(#gradient)"/>
                        <path d="M8 12h16M8 16h16M8 20h10" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        <defs>
                            <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
                                <stop offset="0%" stop-color="#2563eb"/>
                                <stop offset="100%" stop-color="#10b981"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <h1>Cohort Analysis</h1>
                </div>
                <div class="header-actions">
                    <button id="loadSampleBtn" class="btn btn-secondary">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M8 2v12M2 8h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Dados de Exemplo
                    </button>
                    <label for="fileInput" class="btn btn-primary">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M14 10v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2M11 5l-3-3-3 3M8 2v9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Upload CSV/Excel
                    </label>
                    <input type="file" id="fileInput" accept=".csv,.xlsx,.xls" hidden>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <!-- Welcome Screen -->
            <div id="welcomeScreen" class="welcome-screen">
                <div class="welcome-content">
                    <div class="welcome-icon">üìä</div>
                    <h2>Bem-vindo ao Dashboard de An√°lise de Cohort</h2>
                    <p>Carregue seus dados para come√ßar a an√°lise ou use os dados de exemplo</p>
                    <div class="welcome-actions">
                        <label for="fileInputWelcome" class="btn btn-primary btn-lg">
                            <svg width="20" height="20" viewBox="0 0 16 16" fill="none">
                                <path d="M14 10v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2M11 5l-3-3-3 3M8 2v9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Carregar Arquivo
                        </label>
                        <input type="file" id="fileInputWelcome" accept=".csv,.xlsx,.xls" hidden>
                        <button id="loadSampleBtnWelcome" class="btn btn-secondary btn-lg">
                            Usar Dados de Exemplo
                        </button>
                    </div>
                    <div class="data-format-info">
                        <p><strong>Formato esperado:</strong> Month, Start Year, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11</p>
                    </div>
                </div>
            </div>

            <!-- Dashboard Content -->
            <div id="dashboardContent" class="dashboard-content" style="display: none;">
                <!-- Tabs -->
                <nav class="tabs">
                    <button class="tab-btn active" data-tab="overview">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <rect x="2" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                            <rect x="9" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                            <rect x="2" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                            <rect x="9" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                        Vis√£o Geral
                    </button>
                    <button class="tab-btn" data-tab="matrix">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M2 3h12M2 8h12M2 13h12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        Matriz de Reten√ß√£o
                    </button>
                    <button class="tab-btn" data-tab="charts">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M2 14l3-6 3 3 3-8 3 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Gr√°ficos
                    </button>
                    <button class="tab-btn" data-tab="insights">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M8 8l3-3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        Insights
                    </button>
                </nav>

                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- Overview Tab -->
                    <div id="overview" class="tab-pane active">
                        <div class="kpi-grid">
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <span class="kpi-label">Reten√ß√£o M√©dia (M√™s 1)</span>
                                    <span class="kpi-icon">üìà</span>
                                </div>
                                <div class="kpi-value" id="kpiRetention1">--</div>
                                <div class="kpi-trend" id="kpiTrend1"></div>
                            </div>
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <span class="kpi-label">Reten√ß√£o M√©dia (M√™s 3)</span>
                                    <span class="kpi-icon">üìä</span>
                                </div>
                                <div class="kpi-value" id="kpiRetention3">--</div>
                                <div class="kpi-trend" id="kpiTrend3"></div>
                            </div>
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <span class="kpi-label">Reten√ß√£o M√©dia (M√™s 6)</span>
                                    <span class="kpi-icon">üìâ</span>
                                </div>
                                <div class="kpi-value" id="kpiRetention6">--</div>
                                <div class="kpi-trend" id="kpiTrend6"></div>
                            </div>
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <span class="kpi-label">Total de Cohorts</span>
                                    <span class="kpi-icon">üë•</span>
                                </div>
                                <div class="kpi-value" id="kpiTotalCohorts">--</div>
                                <div class="kpi-trend" id="kpiTrendCohorts"></div>
                            </div>
                        </div>

                        <div class="chart-grid">
                            <div class="chart-card">
                                <h3>Curvas de Reten√ß√£o por Cohort</h3>
                                <canvas id="retentionLineChart"></canvas>
                            </div>
                            <div class="chart-card">
                                <h3>Compara√ß√£o de Cohorts</h3>
                                <canvas id="cohortComparisonChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Matrix Tab -->
                    <div id="matrix" class="tab-pane">
                        <div class="matrix-controls">
                            <div class="control-group">
                                <label>
                                    <input type="radio" name="matrixType" value="absolute" checked>
                                    Valores Absolutos
                                </label>
                                <label>
                                    <input type="radio" name="matrixType" value="percentage">
                                    Percentuais (%)
                                </label>
                            </div>
                            <button id="exportMatrixBtn" class="btn btn-secondary">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M14 10v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2M8 11V2M11 8l-3 3-3-3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Exportar CSV
                            </button>
                        </div>
                        <div class="matrix-container">
                            <div id="retentionMatrix" class="retention-matrix"></div>
                        </div>
                    </div>

                    <!-- Charts Tab -->
                    <div id="charts" class="tab-pane">
                        <div class="chart-card full-width">
                            <h3>An√°lise Detalhada de Reten√ß√£o</h3>
                            <canvas id="detailedRetentionChart"></canvas>
                        </div>
                        <div class="chart-grid">
                            <div class="chart-card">
                                <h3>Reten√ß√£o por Per√≠odo</h3>
                                <canvas id="periodRetentionChart"></canvas>
                            </div>
                            <div class="chart-card">
                                <h3>Taxa de Churn</h3>
                                <canvas id="churnChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Insights Tab -->
                    <div id="insights" class="tab-pane">
                        <div class="insights-grid">
                            <div class="insight-card highlight">
                                <h3>üèÜ Melhor Cohort</h3>
                                <div id="bestCohort" class="insight-content">--</div>
                            </div>
                            <div class="insight-card warning">
                                <h3>‚ö†Ô∏è Cohort com Maior Churn</h3>
                                <div id="worstCohort" class="insight-content">--</div>
                            </div>
                            <div class="insight-card">
                                <h3>üìä Padr√µes Identificados</h3>
                                <div id="patterns" class="insight-content">--</div>
                            </div>
                            <div class="insight-card">
                                <h3>üí° Recomenda√ß√µes</h3>
                                <div id="recommendations" class="insight-content">--</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>Desenvolvido por <a href="https://github.com/Euuuller" target="_blank">Euller dos Santos</a> | 
            <a href="https://github.com/Euuuller/Data-Analysis-Excel" target="_blank">GitHub</a></p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/data-processor.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
